<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx.xsd">

	
	<!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="transactionManager"/>

 	<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="user" value="db2inst1"/>
        <property name="password" value="db2inst1"/>
        <property name="driverClass" value="com.ibm.db2.jcc.DB2Driver"/>
        <!--
	        If you are dropping like me (by means of some firewall) IPV6 connections and you feel
	        during the first SLQ connection as if there is a huge lag and you are using
	        *NIX, you could use this system property -Djava.net.preferIPv4Stack=true
	        in order to stop using IPV6 from JVM.
	        The JVM tries to find out if IPV6 is available by means of opening a random
	        AF_INET6 POSIX socket.
         -->
        <property name="jdbcUrl" value="jdbc:db2://localhost:50000/velabd:allowNextOnExhaustedResultSet=1;currentSchema=CLOSURE;"/>
        <property name="initialPoolSize" value="5"/>
        <property name="maxPoolSize" value="20"/>
        <property name="minPoolSize" value="10"/>
        <property name="acquireIncrement" value="1"/>
        <property name="acquireRetryAttempts" value="5"/>
        <property name="acquireRetryDelay" value="1000"/>
        <property name="automaticTestTable" value="con_test"/>
        <property name="checkoutTimeout" value="5000"/>
    </bean>
    
   	<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
		<property name="entityManagerFactory" ref="jpaEntityManagerFactory" />
	</bean>
	
</beans>
